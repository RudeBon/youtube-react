{"version":3,"sources":["store/actions/index.js","store/actions/api.js","store/reducers/api.js","containers/SideBar/SideBarItem/SideBarItem.js","containers/SideBar/SideBarHeader/SideBarHeader.js","containers/SideBar/Subscriptions/Subscription/Subscription.js","containers/SideBar/Subscriptions/Subscriptions.js","containers/SideBar/SideBarFooter/SideBarFooter.js","containers/SideBar/SideBar.js","services/number/number-format.js","services/date/date-format.js","components/VideoPreview/VideoPreview.js","components/VideoGrid/VideoGridHeader/VideoGridHeader.js","components/VideoGrid/VideoGrid.js","store/actions/video.js","store/actions/watch.js","store/api/youtube-response-types.js","services/url/index.js","store/reducers/videos.js","components/InfiniteScroll/InfiniteScroll.js","containers/Home/HomeContent/HomeContent.js","containers/Home/Home.js","assets/images/logo.jpg","containers/HeaderNav/HeaderNav.js","components/ScrollToTop/ScrollToTop.js","components/AppLayout/AppLayout.js","components/RelatedVideos/NextUpVideo/NextUpVideo.js","components/RelatedVideos/RelatedVideos.js","components/Video/Video.js","components/VideoInfoBox/VideoInfoBox.js","components/Rating/Rating.js","components/VideoMetadata/VideoMetadata.js","containers/Comments/AddComment/AddComment.js","containers/Comments/Comment/Comment.js","containers/Comments/CommentsHeader/CommentsHeader.js","containers/Comments/Comments.js","store/reducers/channels.js","store/actions/comment.js","store/reducers/comment.js","containers/Watch/WatchContent/WatchContent.js","containers/Watch/Watch.js","components/VideoList/VideoList.js","containers/Trending/Trending.js","store/actions/search.js","store/reducers/search.js","containers/Search/Search.js","App.js","YoutubeApiConfig.js","reportWebVitals.js","store/reducers/index.js","store/api/youtube-api.js","store/sagas/comment.js","store/sagas/search.js","store/sagas/video.js","store/sagas/watch.js","store/sagas/index.js","index.js","store/configureStore.js"],"names":["REQUEST","SUCCESS","FAILURE","createRequestTypes","base","Error","reduce","acc","type","createAction","payload","YOUTUBE_LIBRARY_LOADED","youtubeLibraryLoaded","bind","initialState","libraryLoaded","getYoutubeLibraryLoaded","state","api","SideBarItem","pathname","this","props","location","console","log","path","includes","highlight","shouldBeHighlighted","to","Menu","Item","className","join","Icon","size","name","icon","label","React","Component","withRouter","SideBarHeader","heading","title","toUpperCase","Header","Subscription","rightElement","broadcasting","amountNewVideos","Image","src","avatar","Subscriptions","Divider","SideBarFooter","SideBar","borderless","vertical","stackable","fixed","UNITS","getShortNumberString","number","digits","some","element","index","lowerBound","Math","pow","i","length","decimal","toFixed","toString","objMap","numbers","datePattern","timePattern","pattern","RegExp","getVideoDurationString","iso8601DateString","match","slice","prev","next","idx","parseFloat","days","hours","minutes","seconds","secondsString","minutesString","accumulatedHours","padStart","TimeAgo","locale","en","timeAgo","VideoPreview","video","videoDuration","contentDetails","duration","viewAndTimeString","publicationDate","Date","snippet","publishedAt","viewCount","statistics","viewCountShort","format","getFormattedViewsAndTime","horizontal","expanded","description","search","thumbnails","medium","url","channelTitle","VideoGridHeader","VideoGrid","videos","gridItems","map","id","divider","hideDivider","MOST_POPULAR","mostPopular","request","amount","loadDescription","nextPageToken","success","response","failure","VIDEO_CATEGORIES","categories","MOST_POPULAR_BY_CATEGORY","mostPopularByCategory","WATCH_DETAILS","details","videoId","channelId","VIDEO_DETAILS","videoDetails","VIDEO_LIST_RESPONSE","SEARCH_LIST_RESPONSE","CHANNEL_LIST_RESPONSE","getSearchParams","URLSearchParams","get","byId","byCategory","related","reduceVideoDetails","responses","prevState","parsedVideos","filter","result","kind","videoMap","items","reduceWatchDetails","find","r","relatedEntry","pageInfo","relatedVideoIds","totalResults","reduceRelatedVideosRequest","reduceFetchMostPopularVideosByCategory","byCategoryMap","forEach","status","categoryId","push","groupVideosByIdAndCategory","reduceFetchVideoCategories","categoryMapping","accumulator","category","reduceFetchMostPopularVideos","Object","keys","hasOwnProperty","getMostPopularVideos","createSelector","videosById","getVideoCategoryIds","getVideosByCategory","videosByCategory","videoIds","videoCategoriesLoaded","videosByCategoryLoaded","getVideoById","getRelatedVideos","getChannelId","getAmountComments","commentCount","getMostPopular","getMostPopularVideosNextPageToken","allMostPopularVideosLoaded","InfiniteScroll","children","onEnter","bottomReachedCallback","Loader","active","showLoader","inline","HomeContent","categoryTitles","categoryTitle","mostPopularVideos","trendingVideos","getTrendingVideos","categoryGrids","getVideoGridsForCategories","connect","Home","fetchVideosByCategory","categoryIndex","fetchCategoriesAndMostPopularVideos","prevProps","videoCategories","fetchMostPopularVideos","fetchVideoCategories","categoryStartIndex","fetchMostPopularVideosByCategory","setState","shouldShowLoader","dispatch","videoActions","bindActionCreators","HeaderNav","onInputChange","event","query","target","value","onSubmit","escapedSearchQuery","encodeURI","history","header","logo","Form","Field","Input","placeholder","action","onChange","position","ScrollToTop","window","scrollTo","AppLayout","NextUpVideo","Checkbox","toggle","defaultChecked","RelatedVideos","nextUpVideo","relatedVideosPreviews","relatedVideo","Video","embedUrl","frameBorder","allow","allowFullScreen","VideoInfoBox","useState","collapsed","setCollapsed","descriptionTextClass","setDescriptionTextClass","buttonTitle","setButtonTitle","useEffect","channel","descriptionParagraphs","videoDescription","split","paragraph","getDescriptionParagraphs","publishedAtString","parse","toDateString","buttonText","subscriberCount","Number","getSubscriberButtonText","channelThumbnail","circular","Button","color","compact","onClick","Rating","rating","likeCount","dislikeCount","amountLikes","amountDislikes","percentagePositiveRatings","Progress","percent","VideoMetadata","toLocaleString","basic","labelPosition","AddComment","TextArea","control","autoHeight","Comment","comment","topLevelComment","authorProfileImageUrl","authorDisplayName","textOriginal","CommentsHeader","amountComments","Comments","comments","channelResponse","channels","channelEntry","getChannel","COMMENT_THREAD","thread","byVideo","reduceCommentThread","res","newComments","item","prevCommentIds","ids","commentIds","byVideoComment","getCommentsForVideo","allComments","commentId","getCommentNextPageToken","relatedVideos","Watch","fetchMoreComments","fetchCommentThread","getVideoId","fetchWatchContent","fetchWatchDetails","watchActions","commentActions","VideoList","videoPreviews","getVideoPreviews","is","Trending","fetchMoreVideos","fetchTrendingVideos","loaderActive","SEARCH_FOR_VIDEOS","forVideos","searchQuery","reduceSearchForVideos","searchResults","results","concat","getSearchResults","getSearchNextPageToken","Search","searchForVideos","getSearchQuery","youtubeApiLoaded","searchActions","loadYoutubeApi","script","document","createElement","onload","gapi","load","client","setApiKey","body","appendChild","component","render","key","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","combineReducers","buildChannelRequest","buildApiRequest","part","fields","buildRelatedVideoRequest","amountRelatedVideos","maxResults","relatedToVideoId","buildVideoDetailRequest","buildMostPopularVideosRequest","videoCategoryId","chart","regionCode","pageToken","requestMethod","params","properties","p","removeEmptyParams","resource","normalizedProps","substr","adjustedName","replace","prop","propArray","ref","pa","createResource","buildCommentThreadRequest","buildSearchRequest","q","watchCommentThread","fetchEntity","take","fork","watchSearchForVideos","watchMostPopularVideos","watchVideoCategories","watchMostPopularVideosByCategory","takeEvery","requests","wrapper","ignoreErrors","call","all","put","watchWatchDetails","fetchVideoDetails","fn","shouldFetchChannelInfo","searchListResponse","relatedVideoId","videoDetailResponse","entity","args","ignoreErrorCallback","store","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","run","rootSaga","configureStore","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.dfea42a5.chunk.js","sourcesContent":["export const REQUEST = 'REQUEST';\r\nexport const SUCCESS = 'SUCCESS';\r\nexport const FAILURE = 'FAILURE';\r\n\r\nexport function createRequestTypes(base) {\r\n    if (!base) {\r\n        throw new Error('cannot create request type with base = \\'\\' or base = null');\r\n    }\r\n    return [REQUEST, SUCCESS, FAILURE].reduce((acc, type) => {\r\n        acc[type] = `${base}_${type}`;\r\n        return acc;\r\n    }, {})\r\n}\r\n\r\nexport function createAction(type, payload = {}) {\r\n    return {\r\n      type,\r\n      ...payload,\r\n    };\r\n  }","import { createAction } from './index';\r\n\r\nexport const YOUTUBE_LIBRARY_LOADED = 'YOUTUBE_LIBRARY_LOADED';\r\nexport const youtubeLibraryLoaded = createAction.bind(null, YOUTUBE_LIBRARY_LOADED);","import { YOUTUBE_LIBRARY_LOADED } from '../actions/api';\r\n\r\nconst initialState = {\r\n    libraryLoaded: false,\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case YOUTUBE_LIBRARY_LOADED:\r\n            return {\r\n                libraryLoaded: true,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const getYoutubeLibraryLoaded = (state) => state.api.libraryLoaded","import React from 'react';\r\nimport { Icon, Menu } from \"semantic-ui-react\";\r\nimport './SideBarItem.scss';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nexport class SideBarItem extends React.Component {\r\n    shouldBeHighlighted() {\r\n        const { pathname } = this.props.location;\r\n        console.log('pathname = ', pathname);\r\n        if (this.props.path === '/') {\r\n            return pathname === this.props.path;\r\n        }\r\n        return pathname.includes(this.props.path)\r\n    }\r\n\r\n    render() {\r\n        const highlight = this.shouldBeHighlighted() ? 'highlight-item' : null;\r\n        return (\r\n            <Link to={{ pathname: this.props.path }}>\r\n                <Menu.Item className={['sidebar-item', highlight].join(' ')}>\r\n                    <div className='sidebar-item-alignment-container'>\r\n                        <span><Icon size='large' name={this.props.icon} /></span>\r\n                        <span>{this.props.label}</span>\r\n                    </div>\r\n                </Menu.Item>\r\n            </Link>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(SideBarItem);","import React from 'react';\r\nimport {Menu} from 'semantic-ui-react';\r\nimport './SideBarHeader.scss';\r\n\r\nconst SideBarHeader = (props) => {\r\n    const heading = props.title ? props.title.toUpperCase() : '';\r\n    return (\r\n        <Menu.Item>\r\n            <Menu.Header className='side-bar-header'>{heading}</Menu.Header>\r\n        </Menu.Item>\r\n    )\r\n}\r\nexport default SideBarHeader;","import React from 'react';\r\nimport { Icon, Image, Menu } from \"semantic-ui-react\";\r\nimport './Subscription.scss';\r\n\r\nconst Subscription = (props) => {\r\n    let rightElement = null;\r\n    const {broadcasting, amountNewVideos} = props\r\n    if (broadcasting) {\r\n        rightElement = <Icon name='signal'/>\r\n    } else if (amountNewVideos) {\r\n        rightElement = <span className='new-videos-count'>{amountNewVideos}</span>\r\n    }\r\n\r\n    return (\r\n        <Menu.Item>\r\n            <div className='subscription'>\r\n                <div>\r\n                    <Image src='http://via.placeholder.com/28x28' avatar/>\r\n                    <span>{props.label}</span>\r\n                </div>\r\n                {rightElement}\r\n            </div>\r\n        </Menu.Item>\r\n    )\r\n}\r\n\r\nexport default Subscription","import React from 'react';\r\nimport Subscription from \"./Subscription/Subscription\";\r\nimport {Divider} from \"semantic-ui-react\";\r\nimport SideBarHeader from '../SideBarHeader/SideBarHeader';\r\n\r\nconst Subscriptions = () => {\r\n    return (\r\n        <>\r\n            <SideBarHeader title='Subscriptions'/>\r\n            <Subscription label='MusicChannel' broadcasting/>\r\n            <Subscription label='Coursera' amountNewVideos={4}/>\r\n            <Subscription label='TEDx Talks' amountNewVideos={2}/>\r\n            <Subscription label='Stanford iOS' amountNewVideos={11}/>\r\n            <Subscription label='Udacity' amountNewVideos={3}/>\r\n            <Divider/>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Subscriptions","import React from 'react'\r\nimport './SideBarFooter.scss'\r\n\r\nconst SideBarFooter = () => {\r\n    return (\r\n        <>\r\n            <div className='footer-block'>\r\n                <div>About Press Copyright</div>\r\n                <div>Creators Advertise</div>\r\n                <div>Developers +MyTube</div>\r\n                <div>Legal</div>\r\n            </div>\r\n            <div className='footer-block'>\r\n                <div>Terms Privacy</div>\r\n                <div>Policy & Safety</div>\r\n                <div>Test new features</div>\r\n            </div>\r\n            <div className='footer-block'>\r\n                <div>All prices include VAT</div>\r\n            </div>\r\n            <div className='footer-block'>\r\n                <div>© Productioncoder.com - A Youtube clone for educational purposes under fair use.</div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SideBarFooter;","import React from 'react'\r\nimport SideBarItem from './SideBarItem/SideBarItem'\r\nimport { Menu, Divider } from 'semantic-ui-react'\r\nimport './SideBar.scss'\r\nimport SideBarHeader from './SideBarHeader/SideBarHeader'\r\nimport Subscriptions from './Subscriptions/Subscriptions'\r\nimport SideBarFooter from './SideBarFooter/SideBarFooter'\r\n\r\nconst SideBar = () => {\r\n    return (\r\n        <Menu borderless vertical stackable fixed='left' className='side-nav'>\r\n            <SideBarItem path='/' label='Home' icon='home' />\r\n            <SideBarItem path='/feed/trending' label='Trending' icon='fire' />\r\n            <SideBarItem label='Followers' icon='spy' />\r\n            <Divider />\r\n            <SideBarHeader title='Library' />\r\n            <SideBarItem label='History' icon='history' />\r\n            <SideBarItem label='Watch later' icon='clock' />\r\n            <SideBarItem label='Liked videos' icon='thumbs up' />\r\n            <Divider />\r\n            <Subscriptions />\r\n            <SideBarHeader title='More from Youtube' />\r\n            <SideBarItem label='Movies and Shows' icon='film' />\r\n            <Divider />\r\n            <SideBarItem label='Report history' icon='flag' />\r\n            <SideBarItem label='Help' icon='help circle' />\r\n            <SideBarItem label='Send feedback' icon='comment' />\r\n            <Divider />\r\n            <SideBarFooter />\r\n        </Menu>\r\n    );\r\n}\r\n\r\nexport default SideBar","const UNITS = ['K', 'M', 'B', 'T'];\r\n\r\nexport function getShortNumberString(number) {\r\n    const shouldShowDecimalPlace = UNITS.some((element, index) => {\r\n        const lowerBound = Math.pow(1000, index + 1);\r\n        const upperBound = lowerBound + lowerBound * 10;\r\n        return number > lowerBound && number < upperBound;\r\n    });\r\n\r\n    const digits = shouldShowDecimalPlace ? 1 : 0;\r\n    for (let i = UNITS.length - 1; i >= 0; i--) {\r\n        const decimal = Math.pow(1000, i + 1);\r\n\r\n        if (number >= decimal) {\r\n            return (number / decimal).toFixed(digits) + UNITS[i];\r\n        }\r\n    }\r\n    return number.toString();\r\n}","const objMap = ['years', 'months', 'days', 'hours', 'minutes', 'seconds'];\r\nconst numbers = '\\\\d+(?:[\\\\.,]\\\\d{0,3})?';\r\nconst datePattern = `(${numbers}Y)?(${numbers}M)?(${numbers}D)?`;\r\nconst timePattern = `T(${numbers}H)?(${numbers}M)?(${numbers}S)?`;\r\nconst pattern = new RegExp(`P(?:${datePattern}(?:${timePattern}))`);\r\n\r\nexport function parseISO8601TimePattern(durationString) {\r\n    return durationString.match(pattern).slice(1).reduce((prev, next, idx) => {\r\n        prev[objMap[idx]] = parseFloat(next) || 0;\r\n        return prev\r\n    }, {});\r\n}\r\n\r\nexport function getVideoDurationString(iso8601DateString) {\r\n    if (!iso8601DateString || iso8601DateString === '') {\r\n        return '';\r\n    }\r\n\r\n    let { days, hours, minutes, seconds } = parseISO8601TimePattern(iso8601DateString);\r\n\r\n    let secondsString = seconds.toString();\r\n    let minutesString = minutes.toString();\r\n    let accumulatedHours = days * 24 + hours;\r\n\r\n    if (seconds < 10) {\r\n        secondsString = seconds.toString().padStart(2, '0')\r\n    }\r\n    if (minutes < 10 && hours !== 0) {\r\n        minutesString = minutes.toString().padStart(2, '0')\r\n    }\r\n    if (!accumulatedHours) {\r\n        return [minutesString, secondsString].join(':')\r\n    } else {\r\n        return [accumulatedHours, minutesString, secondsString].join(':');\r\n    }\r\n}\r\n\r\nexport function getPublishedAtDateString (iso8601DateString) {\r\n    if (!iso8601DateString) {\r\n        return '';\r\n    }\r\n    const date = new Date(Date.parse(iso8601DateString));\r\n    return date.toDateString();\r\n}","import React from 'react';\r\nimport { Image } from 'semantic-ui-react'\r\nimport './VideoPreview.scss'\r\n\r\nimport TimeAgo from \"javascript-time-ago\";\r\nimport en from \"javascript-time-ago/locale/en\";\r\n\r\nimport { getShortNumberString } from '../../services/number/number-format';\r\nimport { getVideoDurationString } from '../../services/date/date-format';\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nTimeAgo.locale(en);\r\nconst timeAgo = new TimeAgo('en-US');\r\n\r\nconst VideoPreview = (props) => {\r\n    const { video } = props;\r\n\r\n    if (!video) {\r\n        return <div />\r\n    }\r\n\r\n    const getFormattedViewsAndTime = (video) => {\r\n        const publicationDate = new Date(video.snippet.publishedAt);\r\n        const viewCount = video.statistics ? video.statistics.viewCount : null;\r\n        if (viewCount) {\r\n            const viewCountShort = getShortNumberString(viewCount);\r\n            return `${viewCountShort} views • ${timeAgo.format(publicationDate)}`\r\n        }\r\n        return ''\r\n    }\r\n\r\n    const duration = video.contentDetails ? video.contentDetails.duration : null;\r\n    const videoDuration = getVideoDurationString(duration);\r\n    const viewAndTimeString = getFormattedViewsAndTime(video);\r\n    const horizontal = props.horizontal ? 'horizontal' : null;\r\n    const expanded = props.expanded ? 'expanded' : null;\r\n    const description = props.expanded ? video.snippet.description : null;\r\n\r\n    return (\r\n        <Link to={{ pathname: props.pathname, search: props.search }}>\r\n            <div className={['video-preview', horizontal, expanded].join(' ')}>\r\n                <div className='image-container'>\r\n                    <Image src={video.snippet.thumbnails.medium.url} />\r\n                    <div className='time-label'>\r\n                        <span>{videoDuration}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='video-info'>\r\n                    <div className={['semi-bold', 'show-max-two-lines', expanded].join(' ')}>{video.snippet.title}</div>\r\n                    <div className='video-preview-metadata-container'>\r\n                        <div className='channel-title'>{video.snippet.channelTitle}</div>\r\n                        <div className='view-and-time'>{viewAndTimeString}</div>\r\n                        <div className='show-max-two-lines'>{description}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    )\r\n}\r\n\r\nexport default VideoPreview","import React from 'react'\r\nimport './VideoGridHeader.scss'\r\n\r\nconst VideoGridHeader = (props) => {\r\n    return (\r\n        <div className='video-grid-header'>\r\n            <span className='title'>{props.title}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoGridHeader","import React from 'react';\r\nimport './VideoGrid.scss'\r\nimport { Divider } from 'semantic-ui-react'\r\nimport VideoPreview from '../VideoPreview/VideoPreview';\r\nimport VideoGridHeader from './VideoGridHeader/VideoGridHeader';\r\n\r\nconst VideoGrid = (props) => {\r\n    if (!props.videos || !props.videos.length) {\r\n        return <div />\r\n    }\r\n    const gridItems = props.videos.map(video => {\r\n        return (\r\n            <VideoPreview\r\n                video={video}\r\n                key={video.id}\r\n                pathname='/watch'\r\n                search={`?v=${video.id}`}\r\n            />\r\n        )\r\n    })\r\n\r\n    const divider = props.hideDivider ? null : <Divider />\r\n    return (\r\n        <div className='video-section'>\r\n            <VideoGridHeader title={props.title} />\r\n            <div className='video-grid'>\r\n                {gridItems}\r\n            </div>\r\n            {divider}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoGrid","import { createAction, createRequestTypes, REQUEST, SUCCESS, FAILURE } from \"./index\";\r\n\r\nexport const MOST_POPULAR = createRequestTypes('MOST_POPULAR');\r\nexport const mostPopular = {\r\n    request: (amount, loadDescription, nextPageToken) => createAction(MOST_POPULAR[REQUEST], { amount, loadDescription, nextPageToken }),\r\n    success: (response) => createAction(MOST_POPULAR[SUCCESS], { response }),\r\n    failure: (response) => createAction(MOST_POPULAR[FAILURE], { response }),\r\n}\r\n\r\nexport const VIDEO_CATEGORIES = createRequestTypes('VIDEO_CATEGORIES');\r\nexport const categories = {\r\n    request: () => createAction(VIDEO_CATEGORIES[REQUEST]),\r\n    success: (response) => createAction(VIDEO_CATEGORIES[SUCCESS], { response }),\r\n    failure: (response) => createAction(VIDEO_CATEGORIES[FAILURE], { response }),\r\n}\r\n\r\nexport const MOST_POPULAR_BY_CATEGORY = createRequestTypes('MOST_POPULAR_BY_CATEGORY');\r\nexport const mostPopularByCategory = {\r\n    request: (categories) => createAction(MOST_POPULAR_BY_CATEGORY[REQUEST], { categories }),\r\n    success: (response, categories) => createAction(MOST_POPULAR_BY_CATEGORY[SUCCESS], { response, categories }),\r\n    failure: (response) => createAction(MOST_POPULAR_BY_CATEGORY[FAILURE], response),\r\n}\r\n","import { createAction, createRequestTypes, FAILURE, SUCCESS, REQUEST } from \"./index\";\r\n\r\nexport const WATCH_DETAILS = createRequestTypes('WATCH_DETAILS');\r\nexport const details = {\r\n    request: (videoId, channelId) => createAction(WATCH_DETAILS[REQUEST], { videoId, channelId }),\r\n    success: (response, videoId) => createAction(WATCH_DETAILS[SUCCESS], { response, videoId }),\r\n    failure: (response) => createAction(WATCH_DETAILS[FAILURE], { response }),\r\n};\r\n\r\nexport const VIDEO_DETAILS = createRequestTypes('VIDEO_DETAILS');\r\nexport const videoDetails = {\r\n    request: () => {\r\n        throw Error('not implemented');\r\n    },\r\n    success: (response) => createAction(VIDEO_DETAILS[SUCCESS], { response }),\r\n    failure: (response) => createAction(VIDEO_DETAILS[FAILURE], { response }),\r\n}","export const VIDEO_LIST_RESPONSE = 'youtube#videoListResponse';\r\nexport const SEARCH_LIST_RESPONSE = 'youtube#searchListResponse';\r\nexport const CHANNEL_LIST_RESPONSE = 'youtube#channelListResponse';\r\nexport const COMMENT_THREAD_LIST_RESPONSE = 'youtube#commentThreadListResponse';","export const getSearchParams = (location, name) => {\r\n    if (!location || !location.search) {\r\n        return null;\r\n    }\r\n    const searchParams = new URLSearchParams(location.search);\r\n    return searchParams.get(name);\r\n};","import { MOST_POPULAR, VIDEO_CATEGORIES, MOST_POPULAR_BY_CATEGORY } from '../actions/video';\r\nimport { SUCCESS } from '../actions';\r\nimport { createSelector } from 'reselect';\r\nimport { VIDEO_DETAILS, WATCH_DETAILS } from '../actions/watch';\r\nimport { VIDEO_LIST_RESPONSE, SEARCH_LIST_RESPONSE } from '../api/youtube-response-types';\r\nimport { getSearchParams } from '../../services/url';\r\n\r\nexport const initialState = {\r\n    byId: {},\r\n    mostPopular: {},\r\n    categories: {},\r\n    byCategory: {},\r\n    related: {},\r\n};\r\n\r\nexport default function videos(state = initialState, action) {\r\n    switch (action.type) {\r\n        case MOST_POPULAR[SUCCESS]:\r\n            return reduceFetchMostPopularVideos(action.response, state);\r\n        case VIDEO_CATEGORIES[SUCCESS]:\r\n            return reduceFetchVideoCategories(action.response, state);\r\n        case MOST_POPULAR_BY_CATEGORY[SUCCESS]:\r\n            return reduceFetchMostPopularVideosByCategory(action.response, action.categories, state);\r\n        case WATCH_DETAILS[SUCCESS]:\r\n            return reduceWatchDetails(action.response, state);\r\n        case VIDEO_DETAILS[SUCCESS]:\r\n            return reduceVideoDetails(action.response, state);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction reduceVideoDetails(responses, prevState) {\r\n    const videoResponses = responses.filter(response => response.result.kind === VIDEO_LIST_RESPONSE);\r\n    const parsedVideos = videoResponses.reduce((videoMap, response) => {\r\n        const video = response.result.items ? response.result.items[0] : null;\r\n        if (!video) {\r\n            return videoMap;\r\n        }\r\n        videoMap[video.id] = video;\r\n        return videoMap;\r\n    }, {});\r\n\r\n    return {\r\n        ...prevState,\r\n        byId: {\r\n            ...prevState.byId,\r\n            ...parsedVideos,\r\n        },\r\n    };\r\n}\r\n\r\nfunction reduceRelatedVideosRequest(responses) {\r\n    const relatedVideosResponse = responses.find(r => r.result.kind === SEARCH_LIST_RESPONSE);\r\n    const { pageInfo, items, nextPageToken } = relatedVideosResponse.result;\r\n    const relatedVideoIds = items.map(video => video.id.videoId);\r\n\r\n    return {\r\n        totalResults: pageInfo.totalResults,\r\n        nextPageToken,\r\n        items: relatedVideoIds,\r\n    };\r\n}\r\n\r\nfunction reduceWatchDetails(responses, prevState) {\r\n    const videoDetailResponse = responses.find(r => r.result.kind === VIDEO_LIST_RESPONSE);\r\n    const video = videoDetailResponse.result.items[0];\r\n    const relatedEntry = reduceRelatedVideosRequest(responses);\r\n\r\n    return {\r\n        ...prevState,\r\n        byId: {\r\n            ...prevState.byId,\r\n            [video.id]: video,\r\n        },\r\n        related: {\r\n            ...prevState.related,\r\n            [video.id]: relatedEntry,\r\n        },\r\n    };\r\n}\r\n\r\n\r\nfunction reduceFetchMostPopularVideosByCategory(responses, categories, prevState) {\r\n    let videoMap = {};\r\n    let byCategoryMap = {};\r\n\r\n    responses.forEach((response, index) => {\r\n        if (response.status === 400) return;\r\n\r\n        const categoryId = categories[index];\r\n        const { byId, byCategory } = groupVideosByIdAndCategory(response.result);\r\n        videoMap = { ...videoMap, ...byId };\r\n        byCategoryMap[categoryId] = byCategory;\r\n    });\r\n\r\n    return {\r\n        ...prevState,\r\n        byId: { ...prevState.byId, ...videoMap },\r\n        byCategory: { ...prevState.byCategory, ...byCategoryMap },\r\n    };\r\n}\r\n\r\nfunction groupVideosByIdAndCategory(response) {\r\n    const videos = response.items;\r\n    const byId = {};\r\n    const byCategory = {\r\n        totalResults: response.pageInfo.totalResults,\r\n        nextPageToken: response.nextPageToken,\r\n        items: [],\r\n    };\r\n\r\n    videos.forEach((video) => {\r\n        byId[video.id] = video;\r\n\r\n        const items = byCategory.items;\r\n        if (items && items) {\r\n            items.push(video.id);\r\n        } else {\r\n            byCategory.items = [video.id];\r\n        }\r\n    });\r\n\r\n    return { byId, byCategory };\r\n}\r\n\r\nfunction reduceFetchVideoCategories(response, prevState) {\r\n    const categoryMapping = response.items.reduce((accumulator, category) => {\r\n        accumulator[category.id] = category.snippet.title;\r\n        return accumulator;\r\n    }, {});\r\n    return {\r\n        ...prevState,\r\n        categories: categoryMapping,\r\n    };\r\n}\r\n\r\nfunction reduceFetchMostPopularVideos(response, prevState) {\r\n    const videoMap = response.items.reduce((accumulator, video) => {\r\n        accumulator[video.id] = video;\r\n        return accumulator;\r\n    }, {})\r\n\r\n    let items = Object.keys(videoMap);\r\n    if (response.hasOwnProperty('prevPageToken') && prevState.mostPopular) {\r\n        items = [...prevState.mostPopular.items, ...items];\r\n    }\r\n\r\n    const mostPopular = {\r\n        totalResults: response.pageInfo.totalResults,\r\n        nextPageToken: response.nextPageToken,\r\n        items,\r\n    };\r\n\r\n    return {\r\n        ...prevState,\r\n        mostPopular,\r\n        byId: {\r\n            ...prevState.byId,\r\n            ...videoMap,\r\n        },\r\n    };\r\n}\r\n\r\n// +++++++ Selectors +++++++\r\n\r\nexport const getMostPopularVideos = createSelector(\r\n    (state) => state.videos.byId,\r\n    (state) => state.videos.mostPopular,\r\n    (videosById, mostPopular) => {\r\n        if (!mostPopular || !mostPopular.items) {\r\n            return [];\r\n        }\r\n        return mostPopular.items.map(videoId => videosById[videoId]);\r\n    }\r\n)\r\n\r\nexport const getVideoCategoryIds = createSelector(\r\n    (state) => state.videos.categories,\r\n    (categories) => {\r\n        return Object.keys(categories || {})\r\n    }\r\n)\r\n\r\nexport const getVideosByCategory = createSelector(\r\n    state => state.videos.byCategory,\r\n    state => state.videos.byId,\r\n    state => state.videos.categories,\r\n    (videosByCategory, videosById, categories) => {\r\n        return Object.keys(videosByCategory || {}).reduce((accumulator, categoryId) => {\r\n            const videoIds = videosByCategory[categoryId].items;\r\n            const categoryTitle = categories[categoryId];\r\n            accumulator[categoryTitle] = videoIds.map(videoId => videosById[videoId]);\r\n            return accumulator;\r\n        }, {});\r\n    }\r\n);\r\n\r\nexport const videoCategoriesLoaded = createSelector(\r\n    state => state.videos.categories,\r\n    (categories) => {\r\n        return Object.keys(categories || {}).length !== 0;\r\n    }\r\n);\r\n\r\nexport const videosByCategoryLoaded = createSelector(\r\n    state => state.videos.byCategory,\r\n    (videosByCategory) => {\r\n        return Object.keys(videosByCategory || {}).length;\r\n    }\r\n);\r\n\r\nexport const getVideoById = (state, videoId) => {\r\n    return state.videos.byId[videoId];\r\n}\r\n\r\nconst getRelatedVideoIds = (state, videoId) => {\r\n    const related = state.videos.related[videoId];\r\n    return related ? related.items : [];\r\n}\r\n\r\nexport const getRelatedVideos = createSelector(\r\n    getRelatedVideoIds,\r\n    state => state.videos.byId,\r\n    (relatedVideoIds, videos) => {\r\n        if (relatedVideoIds) {\r\n            return relatedVideoIds.map(videoId => videos[videoId]).filter(video => video);\r\n        }\r\n        return [];\r\n    }\r\n)\r\n\r\nexport const getChannelId = (state, location, name) => {\r\n    const videoId = getSearchParams(location, name);\r\n    const video = state.videos.byId[videoId];\r\n    if (video) {\r\n        return video.snippet.channelId;\r\n    }\r\n    return null;\r\n};\r\nexport const getAmountComments = createSelector(\r\n    getVideoById,\r\n    (video) => {\r\n        if (video) {\r\n            return video.statistics.commentCount;\r\n        }\r\n        return 0;\r\n    }\r\n)\r\n\r\nconst getMostPopular = (state) => state.videos.mostPopular;\r\nexport const getMostPopularVideosNextPageToken = createSelector(\r\n    getMostPopular,\r\n    (mostPopular) => {\r\n        return mostPopular.nextPageToken;\r\n    }\r\n)\r\n\r\nexport const allMostPopularVideosLoaded = createSelector(\r\n    [getMostPopular],\r\n    (mostPopular) => {\r\n        const amountFetchedItems = mostPopular.items ? mostPopular.items.length : 0;\r\n        return amountFetchedItems === mostPopular.totalResults;\r\n    }\r\n)","import React from 'react';\r\nimport { Waypoint } from 'react-waypoint';\r\nimport { Loader } from 'semantic-ui-react';\r\nimport './InfiniteScroll.scss';\r\n\r\nconst InfiniteScroll = (props) => {\r\n    return (\r\n        <>\r\n            {props.children}\r\n            <Waypoint onEnter={props.bottomReachedCallback} >\r\n                <div className='loader-container'>\r\n                    <Loader active={props.showLoader} inline='centered' />\r\n                </div>\r\n            </Waypoint>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default InfiniteScroll;","import React from 'react';\r\nimport VideoGrid from '../../../components/VideoGrid/VideoGrid';\r\nimport './HomeContent.scss';\r\nimport { getMostPopularVideos, getVideosByCategory } from '../../../store/reducers/videos';\r\nimport { connect } from \"react-redux\";\r\nimport InfiniteScroll from '../../../components/InfiniteScroll/InfiniteScroll';\r\n\r\nconst AMOUNT_TRENDING_VIDEOS = 12;\r\n\r\nclass HomeContent extends React.Component {\r\n    getVideoGridsForCategories() {\r\n        const categoryTitles = Object.keys(this.props.videosByCategory || {});\r\n        return categoryTitles.map((categoryTitle, index) => {\r\n            const videos = this.props.videosByCategory[categoryTitle];\r\n            // the last video grid element should not have a divider\r\n            const hideDivider = index === categoryTitles.length - 1;\r\n            return <VideoGrid title={categoryTitle} videos={videos} key={categoryTitle} hideDivider={hideDivider} />;\r\n        });\r\n    }\r\n\r\n    getTrendingVideos() {\r\n        return this.props.mostPopularVideos.slice(0, AMOUNT_TRENDING_VIDEOS)\r\n    }\r\n\r\n    render() {\r\n\r\n        const trendingVideos = this.getTrendingVideos();\r\n        const categoryGrids = this.getVideoGridsForCategories();\r\n\r\n        return (\r\n            <div className='home-content'>\r\n                <div className='responsive-video-grid-container'>\r\n                    <InfiniteScroll bottomReachedCallback={this.props.bottomReachedCallback} showLoader={this.props.showLoader}>\r\n                        <VideoGrid title='Trending' videos={trendingVideos} />\r\n                        {categoryGrids}\r\n                    </InfiniteScroll>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        videosByCategory: getVideosByCategory(state),\r\n        mostPopularVideos: getMostPopularVideos(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(HomeContent);","import React from 'react';\r\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\r\nimport SideBar from '../SideBar/SideBar';\r\nimport './Home.scss'\r\nimport HomeContent from './HomeContent/HomeContent';\r\nimport { connect } from \"react-redux\";\r\nimport * as videoActions from \"../../store/actions/video\";\r\nimport { bindActionCreators } from 'redux';\r\nimport { getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded } from '../../store/reducers/videos';\r\n\r\nclass Home extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            categoryIndex: 0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.youtubeLibraryLoaded) {\r\n            this.fetchCategoriesAndMostPopularVideos();\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps) { //TODO find a way to use hooks (ryly on libraryLoaded) 24\r\n        if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\r\n            this.fetchCategoriesAndMostPopularVideos();\r\n        } else if (this.props.videoCategories !== prevProps.videoCategories) {\r\n            this.fetchVideosByCategory();\r\n        }\r\n    }\r\n    fetchCategoriesAndMostPopularVideos() {\r\n        this.props.fetchMostPopularVideos();\r\n        this.props.fetchVideoCategories();\r\n    }\r\n    fetchVideosByCategory() {\r\n        const categoryStartIndex = this.state.categoryIndex;\r\n        const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\r\n        this.props.fetchMostPopularVideosByCategory(categories);\r\n        this.setState(prevState => {\r\n            return {\r\n                categoryIndex: prevState.categoryIndex + 3,\r\n            };\r\n        });\r\n    }\r\n    bottomReachedCallback = () => {\r\n        if (!this.props.videoCategoriesLoaded) {\r\n            return;\r\n        }\r\n        this.fetchVideosByCategory();\r\n    };\r\n    shouldShowLoader() {\r\n        if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\r\n            return this.state.categoryIndex < this.props.videoCategories.length;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <SideBar />\r\n                <HomeContent\r\n                    bottomReachedCallback={this.bottomReachedCallback}\r\n                    showLoader={this.shouldShowLoader()}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    const fetchMostPopularVideos = videoActions.mostPopular.request;\r\n    const fetchVideoCategories = videoActions.categories.request;\r\n    const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\r\n    return bindActionCreators({ fetchMostPopularVideos, fetchVideoCategories, fetchMostPopularVideosByCategory }, dispatch);\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n        videoCategories: getVideoCategoryIds(state),\r\n        videoCategoriesLoaded: videoCategoriesLoaded(state),\r\n        videosByCategoryLoaded: videosByCategoryLoaded(state),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","export default __webpack_public_path__ + \"static/media/logo.840cfd4e.jpg\";","import React from \"react\";\r\nimport { Form, Icon, Image, Input, Menu } from 'semantic-ui-react'\r\nimport './HeaderNav.scss'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport logo from '../../assets/images/logo.jpg';\r\n\r\nexport class HeaderNav extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            query: '',\r\n        };\r\n    }\r\n    render() {\r\n        return (\r\n            <Menu borderless className='top-menu' fixed='top'>\r\n                <Menu.Item header className='logo'>\r\n                    <Link to='/'><Image src={logo} size='tiny' /></Link>\r\n                </Menu.Item>\r\n                <Menu.Menu className='nav-container'>\r\n                    <Menu.Item className='search-input'>\r\n                        <Form onSubmit={this.onSubmit}>\r\n                            <Form.Field>\r\n                                <Input placeholder='Search'\r\n                                    size='small'\r\n                                    action='Go'\r\n                                    value={this.state.query}\r\n                                    onChange={this.onInputChange}\r\n                                />\r\n                            </Form.Field>\r\n                        </Form>\r\n                    </Menu.Item>\r\n                    <Menu.Menu className=\"icons-container\" position='right'>\r\n                        <Menu.Item>\r\n                            <Icon className='header-icon' name='video camera' size='large' />\r\n                        </Menu.Item>\r\n                        <Menu.Item>\r\n                            <Icon className='header-icon' name='grid layout' size='large' />\r\n                        </Menu.Item>\r\n                        <Menu.Item>\r\n                            <Icon className='header-icon' name='chat' size='large' />\r\n                        </Menu.Item>\r\n                        <Menu.Item>\r\n                            <Icon className='header-icon' name='alarm' size='large' />\r\n                        </Menu.Item>\r\n                        <Menu.Item name='avatar'>\r\n                            <Image src='https://via.placeholder.com/80x80' avatar />\r\n                        </Menu.Item>\r\n                    </Menu.Menu>\r\n                </Menu.Menu>\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    onInputChange = (event) => {\r\n        this.setState({\r\n            query: event.target.value,\r\n        });\r\n    };\r\n\r\n    onSubmit = () => {\r\n        const escapedSearchQuery = encodeURI(this.state.query);\r\n        this.props.history.push(`/results?search_query=${escapedSearchQuery}`);\r\n    };\r\n}\r\n\r\nexport default withRouter(HeaderNav);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nexport class ScrollToTop extends React.Component {\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.location !== prevProps.location && window) {\r\n            window.scrollTo(0, 0);\r\n        }\r\n    }\r\n    render() {\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default withRouter(ScrollToTop);","import React from 'react'\r\nimport './AppLayout.scss'\r\nimport HeaderNav from '../../containers/HeaderNav/HeaderNav'\r\nimport ScrollToTop from \"../ScrollToTop/ScrollToTop\";\r\n\r\nconst AppLayout = (props) => {\r\n    return (\r\n        <ScrollToTop>\r\n            <div className='app-layout'>\r\n                <HeaderNav />\r\n                {props.children}\r\n            </div>\r\n        </ScrollToTop>\r\n    )\r\n}\r\n\r\nexport default AppLayout","import React from 'react';\r\nimport { Checkbox, Divider } from 'semantic-ui-react';\r\nimport VideoPreview from '../../VideoPreview/VideoPreview';\r\nimport './NextUpVideo.scss'\r\n\r\nconst NextUpVideo = (props) => {\r\n    return (\r\n        <>\r\n            <div className='next-up-container'>\r\n                <h4>Up next</h4>\r\n                <div className='up-next-toggle'>\r\n                    <span>Autoplay</span>\r\n                    <Checkbox toggle defaultChecked />\r\n                </div>\r\n            </div>\r\n            <VideoPreview\r\n                horizontal\r\n                video={props.video}\r\n                pathname='/watch'\r\n                search={`?v=${props.video.id}`}\r\n            />\r\n            <Divider />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NextUpVideo","import React from 'react';\r\nimport './RelatedVideos.scss'\r\nimport VideoPreview from '../VideoPreview/VideoPreview'\r\nimport NextUpVideo from './NextUpVideo/NextUpVideo';\r\n\r\nconst RelatedVideos = (props) => {\r\n    if (!props.videos || !props.videos.length) {\r\n        return <div className='related-videos' />\r\n    }\r\n    const nextUpVideo = props.videos[0];\r\n    const remainingVideos = props.videos.slice(1);\r\n\r\n    const relatedVideosPreviews = remainingVideos.map(relatedVideo => (\r\n        <VideoPreview\r\n            horizontal\r\n            video={relatedVideo}\r\n            key={relatedVideo.id}\r\n            pathname='/watch'\r\n            search={`?v=${relatedVideo.id}`}\r\n        />\r\n    ))\r\n\r\n    return (\r\n        <div className='related-videos'>\r\n            <NextUpVideo video={nextUpVideo} />\r\n            {relatedVideosPreviews}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RelatedVideos","import React from 'react';\r\nimport './Video.scss'\r\n\r\nconst BASE_EMBDED_URL = 'https://www.youtube.com/embed/';\r\n\r\nconst Video = (props) => {\r\n    if (!props.id) {\r\n        return null\r\n    }\r\n    const embedUrl = `${BASE_EMBDED_URL}${props.id}`\r\n    return (\r\n        <div className='video-container'>\r\n            <div className='video'>\r\n                <iframe\r\n                    className='video-player'\r\n                    src={embedUrl}\r\n                    frameBorder='0'\r\n                    allow='autoplay; encrypted-media'\r\n                    allowFullScreen\r\n                    title={'video'}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Video","import React, { useEffect, useState } from 'react';\r\nimport './VideoInfoBox.scss';\r\nimport { Image, Button } from \"semantic-ui-react\";\r\nimport Linkify from 'react-linkify';\r\nimport { getPublishedAtDateString } from \"../../services/date/date-format\";\r\nimport { getShortNumberString } from '../../services/number/number-format';\r\n\r\nconst VideoInfoBox = (props) => {\r\n    const [collapsed, setCollapsed] = useState(true);\r\n    const [descriptionTextClass, setDescriptionTextClass] = useState('collapsed');\r\n    const [buttonTitle, setButtonTitle] = useState('Show More');\r\n\r\n    useEffect(() => {\r\n        if (!collapsed) {\r\n            setDescriptionTextClass('expanded');\r\n            setButtonTitle('Show Less')\r\n        } else {\r\n            setDescriptionTextClass('collapsed');\r\n            setButtonTitle('Show More')\r\n        }\r\n    }, [collapsed])\r\n\r\n    if (!props.video || !props.channel) {\r\n        return <div> Ooops! </div>\r\n    }\r\n\r\n    const onToggleColapseButtonClick = () => {\r\n        setCollapsed(prev => !prev)\r\n    }\r\n    const getDescriptionParagraphs = () => {\r\n        const videoDescription = props.video.snippet ? props.video.snippet.description : null;\r\n        if (!videoDescription) {\r\n            return null;\r\n        }\r\n        return videoDescription.split('\\n').map((paragraph, index) => <p key={index}><Linkify>{paragraph}</Linkify></p>)\r\n    }\r\n    const getSubscriberButtonText = () => {\r\n        const { channel } = props;       \r\n        const parsedSubscriberCount = Number(channel.statistics.subscriberCount);\r\n        const subscriberCount = getShortNumberString(parsedSubscriberCount);\r\n        return `Subscribe ${subscriberCount}`;\r\n    }\r\n\r\n    const descriptionParagraphs = getDescriptionParagraphs();\r\n    const publishedAtString = getPublishedAtDateString(props.video.snippet.publishedAt);\r\n    const buttonText = getSubscriberButtonText();\r\n    const channelThumbnail = props.channel.snippet.thumbnails.medium.url;\r\n    const channelTitle = props.channel.snippet.title;\r\n\r\n    return (\r\n        <div className='video-info-box'>\r\n            <Image className='channel-image' src={channelThumbnail} circular />\r\n            <div className='video-info'>\r\n                <div className='channel-name'>{channelTitle}</div>\r\n                <div className='video-publication-date'>{publishedAtString}</div>\r\n            </div>\r\n            <Button color='youtube' className='subscribe'>{buttonText}</Button>\r\n            <div className='video-description'>\r\n                <div className={descriptionTextClass}>\r\n                    {descriptionParagraphs}\r\n                </div>\r\n                <Button compact onClick={onToggleColapseButtonClick}>{buttonTitle}</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoInfoBox;","import React from 'react';\r\nimport './Rating.scss';\r\nimport { Icon, Progress } from \"semantic-ui-react\";\r\nimport { getShortNumberString } from \"../../services/number/number-format\";\r\n\r\nconst Rating = (props) => {\r\n    let rating = null;\r\n    let likeCount = props.likeCount !== 0 ? props.likeCount : null;\r\n    let dislikeCount = null;\r\n\r\n    if (props.likeCount && props.dislikeCount) {\r\n        const amountLikes = parseFloat(props.likeCount);\r\n        const amountDislikes = parseFloat(props.dislikeCount);\r\n        const percentagePositiveRatings = 100.0 * (amountLikes / (amountLikes + amountDislikes));\r\n\r\n        likeCount = getShortNumberString(amountLikes);\r\n        dislikeCount = getShortNumberString(amountDislikes);\r\n        rating = <Progress /*className='progress'*/ percent={percentagePositiveRatings} size='tiny' />\r\n    }\r\n    return (\r\n        <div className='rating'>\r\n            <div className='thumbs-up'>\r\n                <Icon name='thumbs outline up' />\r\n                <span>{likeCount}</span>\r\n            </div>\r\n            <div className='thumbs-down'>\r\n                <Icon name='thumbs outline down' />\r\n                <span>{dislikeCount}</span>\r\n            </div>\r\n            {rating}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Rating","import React from \"react\";\r\nimport \"./VideoMetadata.scss\";\r\nimport { Divider, Button, Icon } from \"semantic-ui-react\";\r\nimport Rating from '../Rating/Rating'\r\n\r\nconst VideoMetadata = (props) => {\r\n    if (!props.video || !props.video.statistics) {\r\n        return <div />\r\n    }\r\n    const viewCount = Number(props.video.statistics.viewCount).toLocaleString()\r\n    return (\r\n        <div className='video-metadata'>\r\n            <h3>{props.video.snippet.title}</h3>\r\n            <div className='video-stats'>\r\n                <span>{viewCount} views</span>\r\n                <div className='video-actions'>\r\n                    <Rating\r\n                        likeCount={props.video.statistics.likeCount}\r\n                        dislikeCount={props.video.statistics.dislikeCount}\r\n                    />\r\n                    <Button basic icon labelPosition='left'>\r\n                        <Icon name='share' />\r\n                        Share\r\n                    </Button>\r\n                    <Button basic icon>\r\n                        <Icon name='add circle' />\r\n                    </Button>\r\n                    <Button basic icon>\r\n                        <Icon name='ellipsis horizontal' />\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n            <Divider />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoMetadata;","import React from 'react'\r\nimport './AddComment.scss'\r\nimport { Form, Image, TextArea } from \"semantic-ui-react\";\r\n\r\nconst AddComment = () => {\r\n    return (\r\n        <div className='add-comment'>\r\n            <Image className='user-image' src='http://via.placeholder.com/48x48' circular />\r\n            <Form>\r\n                <Form.TextArea control={TextArea} autoHeight placeholder='Add a public comment' />\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\nexport default AddComment","import React from 'react';\r\nimport './Comment.scss';\r\nimport {Button, Image} from \"semantic-ui-react\";\r\nimport Rating from '../../../components/Rating/Rating';\r\n\r\nconst Comment = (props) => {\r\n    if (!props.comment) {\r\n        return <div>No comment</div>;\r\n    }\r\n    const topLevelComment = props.comment.snippet.topLevelComment;\r\n    const {authorProfileImageUrl, authorDisplayName, textOriginal} = topLevelComment.snippet;\r\n    const likeCount = topLevelComment.snippet.likeCount;\r\n\r\n    return (\r\n        <div className='comment'>\r\n            <Image className='user-image' src={authorProfileImageUrl} circular />\r\n            <div>\r\n                <div className='user-name'>{authorDisplayName}</div>\r\n                <span>{textOriginal}</span>\r\n                <div className='comment-actions'>\r\n                    <Rating likeCount={likeCount}/>\r\n                    <Button size='mini' compact>REPLY</Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comment","import React from 'react';\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport './CommentsHeader.scss';\r\n\r\nconst CommentsHeader = (props) => {\r\n    return (\r\n        <div className='comments-header'>\r\n            <h4>{props.amountComments} Comments</h4>\r\n            <Button basic compact icon labelPosition='left'>\r\n                <Icon name='align left' />\r\n                Sort by\r\n            </Button>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default CommentsHeader","import React from 'react';\r\nimport AddComment from './AddComment/AddComment';\r\nimport Comment from './Comment/Comment';\r\nimport './Comments.scss'\r\nimport CommentsHeader from './CommentsHeader/CommentsHeader';\r\n\r\nconst Comments = (props) => {\r\n    if (!props.comments) {\r\n        return <div>There is no comments data</div>\r\n    }\r\n    const comments = props.comments.map((comment) => {\r\n        return <Comment comment={comment} key={comment.id} />\r\n    })\r\n    return (\r\n        <div className='comments-container'>\r\n            <CommentsHeader amountComments={props.amountComments} />\r\n            <AddComment key='add-comment' />\r\n            {comments}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Comments","import { VIDEO_DETAILS, WATCH_DETAILS } from '../actions/watch';\r\nimport { SUCCESS } from '../actions';\r\nimport { CHANNEL_LIST_RESPONSE } from '../api/youtube-response-types';\r\n\r\nconst initialState = {\r\n    byId: {}\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case WATCH_DETAILS[SUCCESS]:\r\n            return reduceWatchDetails(action.response, state);\r\n        case VIDEO_DETAILS[SUCCESS]:\r\n            return reduceVideoDetails(action.response, state);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction reduceWatchDetails(responses, prevState) {\r\n    const channelResponse = responses.find(response => response.result.kind === CHANNEL_LIST_RESPONSE);\r\n    let channels = {};\r\n    if (channelResponse && channelResponse.result.items) {\r\n        const channel = channelResponse.result.items[0];\r\n        channels[channel.id] = channel;\r\n    }\r\n    return {\r\n        ...prevState,\r\n        byId: {\r\n            ...prevState.byId,\r\n            ...channels,\r\n        },\r\n    };\r\n}\r\n\r\nfunction reduceVideoDetails(responses, prevState) {\r\n    const channelResponse = responses.find(response => response.result.kind === CHANNEL_LIST_RESPONSE);\r\n    let channelEntry = {};\r\n    if (channelResponse && channelResponse.result.items) {\r\n        const channel = channelResponse.result.items[0];\r\n        channelEntry = {\r\n            [channel.id]: channel,\r\n        }\r\n    }\r\n\r\n    return {\r\n        ...prevState,\r\n        byId: {\r\n            ...prevState.byId,\r\n            ...channelEntry,\r\n        },\r\n    };\r\n}\r\n\r\nexport const getChannel = (state, channelId) => {\r\n    if (!channelId) return null;\r\n    return state.channels.byId[channelId];\r\n};","import { createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS } from './index';\r\n\r\nexport const COMMENT_THREAD = createRequestTypes('COMMENT_THREAD');\r\nexport const thread = {\r\n    request: (videoId, nextPageToken) => createAction(COMMENT_THREAD[REQUEST], { videoId, nextPageToken }),\r\n    success: (response, videoId) => createAction(COMMENT_THREAD[SUCCESS], { response, videoId }),\r\n    failure: (response) => createAction(COMMENT_THREAD[FAILURE], { response }),\r\n};","import { SUCCESS } from '../actions';\r\nimport { WATCH_DETAILS } from '../actions/watch';\r\nimport { COMMENT_THREAD_LIST_RESPONSE } from '../api/youtube-response-types';\r\nimport { createSelector } from 'reselect';\r\nimport { COMMENT_THREAD } from '../actions/comment';\r\nimport { getSearchParams } from '../../services/url';\r\n\r\nconst initialState = {\r\n    byVideo: {},\r\n    byId: {},\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case COMMENT_THREAD[SUCCESS]:\r\n            return reduceCommentThread(action.response, action.videoId, state);\r\n        case WATCH_DETAILS[SUCCESS]:\r\n            return reduceWatchDetails(action.response, action.videoId, state);\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction reduceWatchDetails(responses, videoId, prevState) {\r\n    const commentThreadResponse = responses.find(res => res.result.kind === COMMENT_THREAD_LIST_RESPONSE);\r\n    return reduceCommentThread(commentThreadResponse.result, videoId, prevState);\r\n}\r\n\r\nfunction reduceCommentThread(response, videoId, prevState) {\r\n    if (!response) {\r\n        return prevState;\r\n    }\r\n    const newComments = response.items.reduce((acc, item) => {\r\n        acc[item.id] = item;\r\n        return acc;\r\n    }, {});\r\n\r\n    const prevCommentIds = prevState.byVideo[videoId] ? prevState.byVideo[videoId].ids : [];\r\n    const commentIds = [...prevCommentIds, ...Object.keys(newComments)];\r\n\r\n    const byVideoComment = {\r\n        nextPageToken: response.nextPageToken,\r\n        ids: commentIds,\r\n    };\r\n\r\n    return {\r\n        ...prevState,\r\n        byId: {\r\n            ...prevState.byId,\r\n            ...newComments,\r\n        },\r\n        byVideo: {\r\n            ...prevState.byVideo,\r\n            [videoId]: byVideoComment,\r\n        },\r\n    };\r\n}\r\n\r\n// Selectors\r\n\r\nconst getCommentIdsForVideo = (state, videoId) => {\r\n    const comment = state.comments.byVideo[videoId];\r\n    if (comment) {\r\n        return comment.ids;\r\n    }\r\n    return [];\r\n}\r\nexport const getCommentsForVideo = createSelector(\r\n    getCommentIdsForVideo,\r\n    state => state.comments.byId,\r\n    (commentIds, allComments) => {\r\n        return commentIds.map(commentId => allComments[commentId]);\r\n    }\r\n);\r\n\r\nconst getComment = (state, location) => {\r\n    const videoId = getSearchParams(location, 'v');\r\n    return state.comments.byVideo[videoId];\r\n};\r\nexport const getCommentNextPageToken = createSelector(\r\n    getComment,\r\n    (comment) => {\r\n        return comment ? comment.nextPageToken : null;\r\n    }\r\n);","import React from 'react';\r\nimport RelatedVideos from '../../../components/RelatedVideos/RelatedVideos';\r\nimport Video from '../../../components/Video/Video';\r\nimport VideoInfoBox from '../../../components/VideoInfoBox/VideoInfoBox';\r\nimport VideoMetadata from '../../../components/VideoMetadata/VideoMetadata';\r\nimport Comments from '../../Comments/Comments';\r\nimport './WatchContent.scss'\r\nimport { getVideoById, getRelatedVideos, getAmountComments } from \"../../../store/reducers/videos\";\r\nimport { connect } from \"react-redux\";\r\nimport { getChannel } from '../../../store/reducers/channels';\r\nimport { getCommentsForVideo } from '../../../store/reducers/comment';\r\nimport InfiniteScroll from '../../../components/InfiniteScroll/InfiniteScroll';\r\n\r\nconst WatchContent = (props) => {\r\n    if (!props.videoId) {\r\n        return <div />\r\n    }\r\n    const shouldShowLoader = () => {\r\n        return !!props.nextPageToken;\r\n    }\r\n    return (\r\n        <InfiniteScroll\r\n            bottomReachedCallback={props.bottomReachedCallback}\r\n            showLoader={shouldShowLoader}\r\n        >\r\n            <div className='watch-grid'>\r\n                <Video className='video' id={props.videoId} /> {/* TODO rick roll everyone -> dQw4w9WgXcQ + autoplay */}\r\n                <VideoMetadata className='metadata' video={props.video} />\r\n                <VideoInfoBox className='video-info-box' video={props.video} channel={props.channel} />\r\n                <Comments className='comments' comments={props.comments} amountComments={props.amountComments} />\r\n                <RelatedVideos className='related-videos' videos={props.relatedVideos} />\r\n            </div>\r\n        </InfiniteScroll>\r\n\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n    return {\r\n        video: getVideoById(state, props.videoId),\r\n        relatedVideos: getRelatedVideos(state, props.videoId),\r\n        channel: getChannel(state, props.channelId),\r\n        comments: getCommentsForVideo(state, props.videoId),\r\n        // commentNextPageToken: getCommentNextPageToken(state, props),\r\n        amountComments: getAmountComments(state, props.videoId)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(WatchContent);","import React from 'react';\r\nimport { bindActionCreators } from \"redux\";\r\nimport * as watchActions from \"../../store/actions/watch\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { getYoutubeLibraryLoaded } from \"../../store/reducers/api\";\r\nimport WatchContent from './WatchContent/WatchContent';\r\nimport { getSearchParams } from '../../services/url';\r\nimport { getChannelId } from '../../store/reducers/videos';\r\nimport * as commentActions from '../../store/actions/comment';\r\nimport { getCommentNextPageToken } from '../../store/reducers/comment';\r\n\r\nexport class Watch extends React.Component {\r\n    getVideoId() {\r\n        return getSearchParams(this.props.location, 'v');\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.youtubeLibraryLoaded) {\r\n            this.fetchWatchContent();\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\r\n            this.fetchWatchContent();\r\n        }\r\n    }\r\n    fetchWatchContent() {\r\n        const videoId = this.getVideoId();\r\n        if (!videoId) {\r\n            this.props.history.push('/');\r\n        }\r\n        this.props.fetchWatchDetails(videoId, this.props.channelId);\r\n    }\r\n    fetchMoreComments = () => {\r\n        if (this.props.nextPageToken) {\r\n            this.props.fetchCommentThread(this.getVideoId(), this.props.nextPageToken);\r\n        }\r\n    }\r\n    render() {\r\n        const videoId = this.getVideoId();\r\n        return (\r\n            <WatchContent\r\n                videoId={videoId}\r\n                channelId={this.props.channelId}\r\n                bottomReachedCallback={this.fetchMoreComments}\r\n                nextPageToken={this.props.nextPageToken}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n    return {\r\n        youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n        channelId: getChannelId(state, props.location, 'v'),\r\n        nextPageToken: getCommentNextPageToken(state, props.location),\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    const fetchWatchDetails = watchActions.details.request;\r\n    const fetchCommentThread = commentActions.thread.request;\r\n    return bindActionCreators({ fetchWatchDetails, fetchCommentThread }, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Watch));","import React from 'react';\r\nimport VideoPreview from '../../components/VideoPreview/VideoPreview';\r\nimport SideBar from '../../containers/SideBar/SideBar'\r\nimport InfiniteScroll from '../../components/InfiniteScroll/InfiniteScroll'\r\nimport './VideoList.scss'\r\n\r\nclass VideoList extends React.Component {\r\n    render() {\r\n        const videoPreviews = this.getVideoPreviews();\r\n        return (\r\n            <>\r\n                <SideBar />\r\n                <div className='video-list'>\r\n                    <InfiniteScroll bottomReachedCallback={this.props.bottomReachedCallback} showLoader={this.props.showLoader}>\r\n                        {videoPreviews}\r\n                    </InfiniteScroll>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    getVideoPreviews() {\r\n        if (!this.props.videos || !this.props.videos.length) {\r\n            return null;\r\n        }\r\n        const firstVideo = this.props.videos[0];\r\n        if (!firstVideo.snippet.description) { return null }\r\n\r\n        return this.props.videos.map(video => (\r\n            <VideoPreview\r\n                horizontal\r\n                expanded\r\n                video={video}\r\n                key={video.is}\r\n                pathname={'/watch'}\r\n                search={'?v=' + video.id}\r\n            />\r\n        ))\r\n    }\r\n\r\n}\r\n\r\nexport default VideoList;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as videoActions from '../../store/actions/video';\r\nimport {\r\n    allMostPopularVideosLoaded,\r\n    getMostPopularVideos,\r\n    getMostPopularVideosNextPageToken\r\n} from '../../store/reducers/videos';\r\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\r\nimport { bindActionCreators } from 'redux';\r\nimport VideoList from '../../components/VideoList/VideoList'\r\n\r\nclass Trending extends React.Component {\r\n    componentDidMount() {\r\n        this.fetchTrendingVideos();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.youtubeLibraryLoaded !== this.props.youtubeLibraryLoaded) {\r\n            this.fetchTrendingVideos();\r\n        }\r\n    }\r\n    fetchTrendingVideos() {\r\n        if (this.props.youtubeLibraryLoaded) {\r\n            this.props.fetchMostPopularVideos(20, true);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const loaderActive = this.shouldShowLoader();\r\n        return (\r\n            <VideoList\r\n                bottomReachedCallback={this.fetchMoreVideos}\r\n                showLoader={loaderActive}\r\n                videos={this.props.videos}\r\n            />\r\n        )\r\n    }\r\n\r\n    shouldShowLoader() {\r\n        return !this.props.allMostPopularVideosLoaded;\r\n    }\r\n\r\n    fetchMoreVideos = () => {\r\n        const { nextPageToken } = this.props;\r\n        if (this.props.youtubeLibraryLoaded && nextPageToken) {\r\n            this.props.fetchMostPopularVideos(12, true, nextPageToken);\r\n        }\r\n    }    \r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        videos: getMostPopularVideos(state),\r\n        youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n        allMostPopularVideosLoaded: allMostPopularVideosLoaded(state),\r\n        nextPageToken: getMostPopularVideosNextPageToken(state)\r\n    };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    const fetchMostPopularVideos = videoActions.mostPopular.request;\r\n    return bindActionCreators({ fetchMostPopularVideos }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Trending);","import { createAction, createRequestTypes, REQUEST, SUCCESS, FAILURE } from './index';\r\n\r\nexport const SEARCH_FOR_VIDEOS = createRequestTypes('SEARCH_FOR_VIDEOS');\r\nexport const forVideos = {\r\n    request: (searchQuery, nextPageToken, amount) => createAction(SEARCH_FOR_VIDEOS[REQUEST], { searchQuery, nextPageToken, amount }),\r\n    success: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[SUCCESS], { response, searchQuery }),\r\n    failure: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[FAILURE], { response, searchQuery })\r\n}","import { SUCCESS, REQUEST } from \"../actions\";\r\nimport { SEARCH_FOR_VIDEOS } from \"../actions/search\";\r\n\r\nexport default function (state = {}, action) {\r\n    switch (action.type) {\r\n        case SEARCH_FOR_VIDEOS[SUCCESS]:\r\n            return reduceSearchForVideos(action.response, action.searchQuery, state);\r\n        case SEARCH_FOR_VIDEOS[REQUEST]:\r\n            return action.nextPageToken ? state : {};\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\r\n    let searchResults = response.items.map(item => ({ ...item, id: item.id.videoId }));\r\n    if (prevState.query === searchQuery) {\r\n        const prevResults = prevState.results || [];\r\n        searchResults = prevResults.concat(searchResults);\r\n    }\r\n    return {\r\n        totalResults: response.pageInfo.totalResults,\r\n        nextPageToken: response.nextPageToken,\r\n        query: searchQuery,\r\n        results: searchResults\r\n    };\r\n}\r\n\r\nexport const getSearchResults = (state) => state.search.results;\r\nexport const getSearchNextPageToken = (state) => state.search.nextPageToken;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VideoList from '../../components/VideoList/VideoList';\r\nimport './Search.scss';\r\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\r\nimport { getSearchNextPageToken, getSearchResults } from '../../store/reducers/search';\r\nimport * as searchActions from '../../store/actions/search';\r\nimport { bindActionCreators } from 'redux';\r\nimport { getSearchParams } from '../../services/url';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Search extends React.Component {\r\n\r\n    componentDidMount() {\r\n        if (!this.getSearchQuery()) {\r\n            this.props.history.push('/');\r\n        }\r\n        this.searchForVideos();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\r\n            this.searchForVideos();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <VideoList\r\n                bottomReachedCallback={this.bottomReachedCallback}\r\n                showLoader={true}\r\n                videos={this.props.searchResults}\r\n            />\r\n        );\r\n    }\r\n\r\n    bottomReachedCallback = () => {\r\n        if (this.props.nextPageToken) {\r\n            this.props.searchForVideos(this.getSearchQuery(), this.props.nextPageToken, 25);\r\n        }\r\n    };\r\n\r\n    getSearchQuery() {\r\n        return getSearchParams(this.props.location, 'search_query');\r\n    }\r\n\r\n    searchForVideos() {\r\n        const searchQuery = this.getSearchQuery();\r\n        if (this.props.youtubeApiLoaded) {\r\n            this.props.searchForVideos(searchQuery);\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    const searchForVideos = searchActions.forVideos.request;\r\n    return bindActionCreators({ searchForVideos }, dispatch);\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n    return {\r\n        youtubeApiLoaded: getYoutubeLibraryLoaded(state),\r\n        searchResults: getSearchResults(state, props.location.search),\r\n        nextPageToken: getSearchNextPageToken(state, props.location.search),\r\n    };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));","import React, { useEffect } from 'react';\nimport Home from './containers/Home/Home';\nimport AppLayout from './components/AppLayout/AppLayout';\nimport { Route, Switch, withRouter } from 'react-router-dom';\nimport Watch from './containers/Watch/Watch';\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { youtubeLibraryLoaded } from './store/actions/api';\nimport { YoutubeApiKey } from \"./YoutubeApiConfig\";\nimport Trending from './containers/Trending/Trending';\nimport Search from './containers/Search/Search'\n\nconst API_KEY = YoutubeApiKey;\n\nfunction App(props) {\n  useEffect(() => {\n    loadYoutubeApi();\n  }, [])\n\n  const loadYoutubeApi = () => {\n    const script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/client.js';\n\n    script.onload = () => {\n      window.gapi.load('client', () => {\n        window.gapi.client.setApiKey(API_KEY);\n        window.gapi.client.load('youtube', 'v3', () => {\n          props.youtubeLibraryLoaded();\n        });\n      });\n    };\n\n    document.body.appendChild(script);\n  }\n\n  return (\n    <>\n      <AppLayout>\n        <Switch>\n          <Route path='/feed/trending' component={Trending} />\n          <Route path=\"/results\" render={() => <Search key={props.location.key} />} />\n          <Route path='/watch' render={() => <Watch key={props.location.key} />} />\n          <Route path='/' component={Home} />\n        </Switch>\n      </AppLayout>\n    </>\n  );\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ youtubeLibraryLoaded }, dispatch);\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(App));\n","export const YoutubeApiKey = 'AIzaSyDvJ3Nhu8K5DgP7e10jCJjDBjw2cVnGPgk';","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from 'redux';\r\nimport apiReducer from './api';\r\nimport videosReducer from './videos';\r\nimport channelsReducer from './channels';\r\nimport commentsReducer from './comment';\r\nimport searchReducer from './search';\r\n\r\nexport default combineReducers({\r\n    api: apiReducer,\r\n    videos: videosReducer,\r\n    channels: channelsReducer,\r\n    comments: commentsReducer,\r\n    search: searchReducer,\r\n});","// import { YoutubeApiKey } from \"YoutubeApiConfig\";\r\n\r\n// ########################################\r\n// generated from youtube api reference\r\n// ########################################\r\n\r\n/**\r\n * Sample JavaScript code for youtube.videos.list\r\n * See instructions for running APIs Explorer code samples locally:\r\n * https://developers.google.com/explorer-help/guides/code_samples#javascript\r\n */\r\n\r\n// function authenticate() {\r\n//     return gapi.auth2.getAuthInstance()\r\n//         .signIn({ scope: \"https://www.googleapis.com/auth/youtube.readonly\" })\r\n//         .then(function () { console.log(\"Sign-in successful\"); },\r\n//             function (err) { console.error(\"Error signing in\", err); });\r\n// }\r\n// function loadClient() {\r\n//     gapi.client.setApiKey(YoutubeApiKey);\r\n//     return gapi.client.load(\"https://www.googleapis.com/discovery/v1/apis/youtube/v3/rest\")\r\n//         .then(function () { console.log(\"GAPI client loaded for API\"); },\r\n//             function (err) { console.error(\"Error loading GAPI client for API\", err); });\r\n// }\r\n// // Make sure the client is loaded and sign-in is complete before calling this method.\r\n// function execute() {\r\n//     return gapi.client.youtube.videos.list({\r\n//         \"part\": [\r\n//             \"snippet,contentDetails,statistics\"\r\n//         ],\r\n//         \"id\": [\r\n//             \"Ks-_Mh1QhMc\"\r\n//         ],\r\n//         \"fields\": \"items(id,snippet,statistics(commentCount,likeCount,viewCount))\"\r\n//     })\r\n//         .then(function (response) {\r\n//             // Handle the results here (response.result has the parsed body).\r\n//             console.log(\"Response\", response);\r\n//         },\r\n//             function (err) { console.error(\"Execute error\", err); });\r\n// }\r\n// gapi.load(\"client:auth2\", function () {\r\n//     gapi.auth2.init({ client_id: \"YOUR_CLIENT_ID\" });\r\n// });\r\n\r\n\r\n// ########################################\r\n// From productioncoder 21 \r\n// ########################################\r\n\r\nexport function buildChannelRequest(channelId) {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/channels',\r\n        {\r\n            part: 'snippet,statistics',\r\n            id: channelId,\r\n            fields: 'kind,items(id,snippet(description,thumbnails/medium,title),statistics/subscriberCount)'\r\n        },\r\n        null\r\n    );\r\n}\r\n\r\nexport function buildRelatedVideoRequest(videoId, amountRelatedVideos = 12) {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/search',\r\n        {\r\n            part: 'snippet',\r\n            type: 'video',\r\n            maxResults: amountRelatedVideos,\r\n            relatedToVideoId: videoId,\r\n        },\r\n        null\r\n    );\r\n}\r\n\r\nexport function buildVideoDetailRequest(videoId) {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/videos',\r\n        {\r\n            part: 'snippet, statistics, contentDetails',\r\n            id: videoId,\r\n            fields: 'kind,items(contentDetails/duration,id,snippet(channelId,channelTitle,description,publishedAt,thumbnails/medium,title),statistics)',\r\n        },\r\n        null\r\n    )\r\n}\r\n\r\nexport function buildMostPopularVideosRequest(amount = 12, loadDescription = false, nextPageToken, videoCategoryId = null) {\r\n    let fields = 'nextPageToken,prevPageToken,items(contentDetails/duration,id,snippet(channelId,channelTitle,publishedAt,thumbnails/medium,title),statistics/viewCount),pageInfo(totalResults)';\r\n    if (loadDescription) {\r\n        fields += ',items/snippet/description';\r\n    }\r\n    return buildApiRequest('GET',\r\n        '/youtube/v3/videos',\r\n        {\r\n            part: 'snippet,statistics,contentDetails',\r\n            chart: 'mostPopular',\r\n            maxResults: amount,\r\n            regionCode: 'US',\r\n            pageToken: nextPageToken,\r\n            fields,\r\n            videoCategoryId,\r\n        }, null);\r\n}\r\n\r\nexport function buildApiRequest(requestMethod, path, params, properties) {\r\n    params = removeEmptyParams(params);\r\n    let request;\r\n    if (properties) {\r\n        let resource = createResource(properties);\r\n        request = window.gapi.client.request({\r\n            'body': resource,\r\n            'method': requestMethod,\r\n            'path': path,\r\n            'params': params\r\n        });\r\n    } else {\r\n        request = window.gapi.client.request({\r\n            'method': requestMethod,\r\n            'path': path,\r\n            'params': params\r\n        });\r\n    }\r\n    return request;\r\n}\r\n\r\nfunction removeEmptyParams(params) {\r\n    for (var p in params) {\r\n        if (!params[p] || params[p] === 'undefined') {\r\n            delete params[p];\r\n        }\r\n    }\r\n    return params;\r\n}\r\n\r\nfunction createResource(properties) {\r\n    var resource = {};\r\n    var normalizedProps = properties;\r\n    for (var p in properties) {\r\n        var value = properties[p];\r\n        if (p && p.substr(-2, 2) === '[]') {\r\n            var adjustedName = p.replace('[]', '');\r\n            if (value) {\r\n                normalizedProps[adjustedName] = value.split(',');\r\n            }\r\n            delete normalizedProps[p];\r\n        }\r\n    }\r\n    for (var prop in normalizedProps) {\r\n        // Leave properties that don't have values out of inserted resource.\r\n        if (normalizedProps.hasOwnProperty(prop) && normalizedProps[prop]) {\r\n            var propArray = prop.split('.');\r\n            var ref = resource;\r\n            for (var pa = 0; pa < propArray.length; pa++) {\r\n                var key = propArray[pa];\r\n                if (pa === propArray.length - 1) {\r\n                    ref[key] = normalizedProps[prop];\r\n                } else {\r\n                    ref = ref[key] = ref[key] || {};\r\n                }\r\n            }\r\n        };\r\n    }\r\n    return resource;\r\n}\r\n\r\nexport function buildVideoCategoriesRequest() {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/videoCategories',\r\n        {\r\n            'part': 'snippet',\r\n            'regionCode': 'US'\r\n        },\r\n        null\r\n    )\r\n}\r\n\r\nexport function buildCommentThreadRequest(videoId, nextPageToken) {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/commentThreads',\r\n        {\r\n            part: 'id,snippet',\r\n            pageToken: nextPageToken,\r\n            videoId,\r\n        },\r\n        null\r\n    );\r\n}\r\n\r\nexport function buildSearchRequest(query, nextPageToken, amount = 12) {\r\n    return buildApiRequest(\r\n        'GET',\r\n        '/youtube/v3/search',\r\n        {\r\n            part: 'id,snippet',\r\n            q: query,\r\n            type: 'video',\r\n            pageToken: nextPageToken,\r\n            maxResults: amount,\r\n        },\r\n        null\r\n    )\r\n}","import { fork, take } from 'redux-saga/effects';\r\nimport { REQUEST } from '../actions';\r\nimport * as commentActions from '../actions/comment';\r\nimport * as api from '../api/youtube-api';\r\nimport { fetchEntity } from './index';\r\n\r\nexport function* fetchCommentThread(videoId, nextPageToken) {\r\n    const request = api.buildCommentThreadRequest.bind(null, videoId, nextPageToken);\r\n    yield fetchEntity(request, commentActions.thread, videoId);\r\n}\r\n\r\nexport function* watchCommentThread() {\r\n    while (true) {\r\n        const { videoId, nextPageToken } = yield take(commentActions.COMMENT_THREAD[REQUEST]);\r\n        yield fork(fetchCommentThread, videoId, nextPageToken);\r\n    }\r\n}","import * as api from '../api/youtube-api';\r\nimport { REQUEST } from '../actions';\r\nimport { fork, take } from 'redux-saga/effects';\r\nimport * as searchActions from '../actions/search'\r\nimport { fetchEntity } from '.';\r\n\r\nexport function* watchSearchForVideos() {\r\n    while (true) {\r\n        const { searchQuery, amount, nextPageToken } = yield take(searchActions.SEARCH_FOR_VIDEOS[REQUEST]);\r\n        yield fork(searchForVideos, searchQuery, nextPageToken, amount);\r\n    }\r\n}\r\n\r\nexport function* searchForVideos(searchQuery, nextPageToken, amount) {\r\n    const request = api.buildSearchRequest.bind(null, searchQuery, nextPageToken, amount);\r\n    yield fetchEntity(request, searchActions.forVideos, searchQuery);\r\n}","import { fork, call, take, takeEvery, all, put } from \"redux-saga/effects\";\r\nimport * as api from '../api/youtube-api';\r\nimport * as videoActions from '../actions/video';\r\nimport { REQUEST } from '../actions';\r\nimport { fetchEntity, ignoreErrors } from './index';\r\n\r\n//========= most popular \r\n\r\nexport function* watchMostPopularVideos() {\r\n    while (true) {\r\n        const { amount, loadDescription, nextPageToken } = yield take(videoActions.MOST_POPULAR[REQUEST]);\r\n        yield fork(fetchMostPopularVideos, amount, loadDescription, nextPageToken);\r\n    }\r\n}\r\n\r\nexport function* fetchMostPopularVideos(amount, loadDescription, nextPageToken) {\r\n    const request = api.buildMostPopularVideosRequest.bind(null, amount, loadDescription, nextPageToken);\r\n    yield fetchEntity(request, videoActions.mostPopular)\r\n}\r\n\r\n//========= video categories\r\n\r\nexport const fetchVideoCategories = fetchEntity.bind(null, api.buildVideoCategoriesRequest, videoActions.categories);\r\n\r\nexport function* watchVideoCategories() {\r\n    yield takeEvery(videoActions.VIDEO_CATEGORIES[REQUEST], fetchVideoCategories)\r\n}\r\n\r\n//========= most popular by category\r\n\r\nexport function* watchMostPopularVideosByCategory() {\r\n    while (true) {\r\n        const { categories } = yield take(videoActions.MOST_POPULAR_BY_CATEGORY[REQUEST]);\r\n        yield fork(fetchMostPopularVideosByCategory, categories);\r\n    }\r\n}\r\n\r\nexport function* fetchMostPopularVideosByCategory(categories) {\r\n    const requests = categories.map(categoryId => {\r\n        const wrapper = ignoreErrors(api.buildMostPopularVideosRequest, 12, false, null, categoryId);\r\n        return call(wrapper);\r\n    });\r\n    try {\r\n        const response = yield all(requests);\r\n        yield put(videoActions.mostPopularByCategory.success(response, categories));\r\n    } catch (error) {\r\n        yield put(videoActions.mostPopularByCategory.failure(error));\r\n    }\r\n}\r\n","import { fork, take, all, put, call } from \"redux-saga/effects\";\r\nimport * as watchActions from \"../actions/watch\";\r\nimport { REQUEST } from '../actions';\r\nimport {\r\n    buildRelatedVideoRequest,\r\n    buildVideoDetailRequest,\r\n    buildChannelRequest,\r\n    buildCommentThreadRequest\r\n} from \"../api/youtube-api\";\r\nimport { SEARCH_LIST_RESPONSE, VIDEO_LIST_RESPONSE } from \"../api/youtube-response-types\";\r\n\r\nexport function* watchWatchDetails() {\r\n    while (true) {\r\n        const { videoId, channelId } = yield take(watchActions.WATCH_DETAILS[REQUEST]);\r\n        yield fork(fetchWatchDetails, videoId, channelId);\r\n    }\r\n}\r\n\r\nexport function* fetchWatchDetails(videoId, channelId) {\r\n    let requests = [\r\n        buildVideoDetailRequest.bind(null, videoId),\r\n        buildRelatedVideoRequest.bind(null, videoId),\r\n        buildCommentThreadRequest.bind(null, videoId)\r\n    ];\r\n    if (channelId) {\r\n        requests.push(buildChannelRequest.bind(null, channelId));\r\n    }\r\n    try {\r\n        const responses = yield all(requests.map(fn => call(fn)));\r\n        yield put(watchActions.details.success(responses, videoId));\r\n        yield call(fetchVideoDetails, responses, channelId === null);\r\n    } catch (error) {\r\n        yield put(watchActions.details.failure(error));\r\n    };\r\n}\r\n\r\nfunction* fetchVideoDetails(responses, shouldFetchChannelInfo) {\r\n    const searchListResponse = responses.find(response => response.result.kind === SEARCH_LIST_RESPONSE);\r\n    const relatedVideoIds = searchListResponse.result.items.map(relatedVideo => relatedVideo.id.videoId);\r\n\r\n    const requests = relatedVideoIds.map(relatedVideoId => {\r\n        return buildVideoDetailRequest.bind(null, relatedVideoId);\r\n    });\r\n\r\n    if (shouldFetchChannelInfo) {\r\n        const videoDetailResponse = responses.find(response => response.result.kind === VIDEO_LIST_RESPONSE);\r\n        const videos = videoDetailResponse.result.items;\r\n        if (videos && videos.length) {\r\n            requests.push(buildChannelRequest.bind(null, videos[0].snippet.channelId));\r\n        }\r\n    }\r\n\r\n    try {\r\n        const responses = yield all(requests.map(fn => call(fn)));\r\n        yield put(watchActions.videoDetails.success(responses));\r\n    } catch (error) {\r\n        yield put(watchActions.videoDetails.failure(error));\r\n    }\r\n}","import { all, call, put, fork } from \"redux-saga/effects\";\r\nimport { watchCommentThread } from \"./comment\";\r\nimport { watchSearchForVideos } from \"./search\";\r\nimport { watchMostPopularVideos, watchMostPopularVideosByCategory, watchVideoCategories } from \"./video\";\r\nimport { watchWatchDetails } from \"./watch\";\r\n\r\nexport default function* () {\r\n    yield all([\r\n        fork(watchMostPopularVideos),\r\n        fork(watchVideoCategories),\r\n        fork(watchMostPopularVideosByCategory),\r\n        fork(watchWatchDetails),\r\n        fork(watchCommentThread),\r\n        fork(watchSearchForVideos)\r\n    ]);\r\n}\r\n\r\nexport function* fetchEntity(request, entity, ...args) {\r\n    try {\r\n        const response = yield call(request);\r\n        yield put(entity.success(response.result, ...args));\r\n    } catch (error) {\r\n        yield put(entity.failure(error, ...args))\r\n    }\r\n}\r\n\r\nexport function ignoreErrors(fn, ...args) {\r\n    return () => {\r\n        const ignoreErrorCallback = (response) => response;\r\n        return fn(...args).then(ignoreErrorCallback, ignoreErrorCallback);\r\n    };\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter } from 'react-router-dom'\nimport { configureStore } from \"./store/configureStore\";\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n","import {applyMiddleware, compose, createStore} from 'redux';\r\nimport reducer from './reducers';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport rootSaga from './sagas';\r\n\r\nexport function configureStore() {\r\n    const sagaMiddleware = createSagaMiddleware();\r\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n    const store = createStore(\r\n        reducer,\r\n        composeEnhancers(applyMiddleware(sagaMiddleware))        \r\n    );\r\n\r\n    sagaMiddleware.run(rootSaga);\r\n    return store;\r\n}"],"sourceRoot":""}